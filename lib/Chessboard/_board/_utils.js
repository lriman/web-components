"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.removeSpriteSvg=exports.squareToIndex=exports.getSquareDistance=exports.getRankCoordinatesColor=exports.getFileCoordinatesColor=exports.getMoveStyles=exports.getGradientArrow=exports.getArrowPoints=exports.squareIndexToPoint=void 0;var squareIndexToPoint=function squareIndexToPoint(index,squareWidth,squareHeight,chessboard,borderSize){var x;var y;if(chessboard.state.orientation==='w'){x=borderSize+index%8*squareWidth;y=borderSize+(7-Math.floor(index/8))*squareHeight;}else{x=borderSize+(7-index%8)*squareWidth;y=borderSize+Math.floor(index/8)*squareHeight;}return{x:x,y:y};};exports.squareIndexToPoint=squareIndexToPoint;var getArrowPoints=function getArrowPoints(arrow,squareWidth,squareHeight,chessboard,borderSize){var a=squareIndexToPoint(arrow.from,squareWidth,squareHeight,chessboard,borderSize);a.x+=squareWidth/2;a.y+=squareWidth/2;var b=squareIndexToPoint(arrow.to,squareWidth,squareHeight,chessboard,borderSize);b.x+=squareWidth/2;b.y+=squareWidth/2;return{a:a,b:b};};exports.getArrowPoints=getArrowPoints;var getGradientArrow=function getGradientArrow(Svg,arrow,arrowGroup,a,b,xo,yo,strokeWidth){Svg.addElement(arrowGroup,'line',{stroke:arrow.color,'stroke-width':strokeWidth,'stroke-linecap':'round','marker-end':"url(#arrowhead".concat(arrow.from,"-").concat(arrow.to,")"),'pointer-events':'none',opacity:0.95,x1:a.x,y1:a.y,x2:b.x-xo,y2:b.y-yo,orient:'auto'});var defs=Svg.addElement(arrowGroup,'defs',{});var marker=Svg.addElement(defs,'marker',{id:"arrowhead".concat(arrow.from,"-").concat(arrow.to),markerWidth:'10',markerHeight:'7',refX:'0',refY:'1.6',orient:'auto'});Svg.addElement(marker,'polygon',{id:'12',fill:arrow.color,points:'0 0, 2.7 1.6, 0 3.2'});return arrowGroup;};exports.getGradientArrow=getGradientArrow;var getMoveStyles=function getMoveStyles(data,styles){return data.map(function(item){var square=item?item[0]:null;return[square,styles.moveSquareStyles];});};exports.getMoveStyles=getMoveStyles;var getFileCoordinatesColor=function getFileCoordinatesColor(file,boardStyles,inline){if(!inline)return boardStyles.notationStyle;return file%2===0?boardStyles.darkSquareNotationStyle:boardStyles.lightSquareNotationStyle;};exports.getFileCoordinatesColor=getFileCoordinatesColor;var getRankCoordinatesColor=function getRankCoordinatesColor(rank,boardStyles,inline){if(!inline)return boardStyles.notationStyle;return rank%2===0?boardStyles.lightSquareNotationStyle:boardStyles.darkSquareNotationStyle;};exports.getRankCoordinatesColor=getRankCoordinatesColor;var getSquareDistance=function getSquareDistance(index1,index2){var file1=index1%8;var rank1=Math.floor(index1/8);var file2=index2%8;var rank2=Math.floor(index2/8);return Math.max(Math.abs(rank2-rank1),Math.abs(file2-file1));};exports.getSquareDistance=getSquareDistance;var squareToIndex=function squareToIndex(square){if(!square)return null;var file=square.substr(0,1).charCodeAt(0)-97;var rank=square.substr(1,1)-1;return 8*rank+file;};exports.squareToIndex=squareToIndex;var removeSpriteSvg=function removeSpriteSvg(svg){var spriteSvg=document.getElementById('board-spriteSvg');svg.removeElement(spriteSvg);};exports.removeSpriteSvg=removeSpriteSvg;