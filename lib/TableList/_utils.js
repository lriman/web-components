"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPaginatedTableData=exports.getInitPagination=exports.getPaginateTotal=exports.getCalcCaptions=exports.getColumnsPagination=exports.getColumnsPaginationLimit=exports.getCanPaginateColumns=exports.getUpdateSortItem=exports.getSortableColumns=exports.getSortedData=exports.getInitSortableColumns=exports.getCellBorder=exports.getRowBorderRadius=exports.getRowBorder=exports.getRowBackgroundColor=exports.getRowColor=exports.getCaptionsBorderColor=exports.getCaptionsColor=exports.getSectionTitleBorderColor=exports.getSectionTitleColor=void 0;var _constants=require("./_constants");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var getSectionTitleColor=function getSectionTitleColor(theme,colorType){return theme.tableList[colorType].sectionTitleColor;};exports.getSectionTitleColor=getSectionTitleColor;var getSectionTitleBorderColor=function getSectionTitleBorderColor(theme,colorType){return theme.tableList[colorType].sectionTitleBorderColor;};exports.getSectionTitleBorderColor=getSectionTitleBorderColor;var getCaptionsColor=function getCaptionsColor(theme,colorType){return theme.tableList[colorType].captionsColor;};exports.getCaptionsColor=getCaptionsColor;var getCaptionsBorderColor=function getCaptionsBorderColor(theme,colorType){return theme.tableList[colorType].captionsBorderColor;};exports.getCaptionsBorderColor=getCaptionsBorderColor;var getRowColor=function getRowColor(theme,colorType,isHovered,isWithoutRowHover){var _theme$tableList$colo,_theme$tableList$colo2;if(isHovered&&!isWithoutRowHover)return(_theme$tableList$colo=theme.tableList[colorType])===null||_theme$tableList$colo===void 0?void 0:_theme$tableList$colo.rowColors.hovered;return(_theme$tableList$colo2=theme.tableList[colorType])===null||_theme$tableList$colo2===void 0?void 0:_theme$tableList$colo2.rowColors.normal;};exports.getRowColor=getRowColor;var getRowBackgroundColor=function getRowBackgroundColor(theme,colorType,type,isCaption,isHovered,isWithoutRowHover){var _theme$tableList$colo3,_theme$tableList$colo4;if(type===_constants.REFS.TYPES.PRIMARY&&isCaption)return null;if(isHovered&&!isWithoutRowHover)return(_theme$tableList$colo3=theme.tableList[colorType])===null||_theme$tableList$colo3===void 0?void 0:_theme$tableList$colo3.rowBackgroundColors.hovered;return(_theme$tableList$colo4=theme.tableList[colorType])===null||_theme$tableList$colo4===void 0?void 0:_theme$tableList$colo4.rowBackgroundColors.normal;};exports.getRowBackgroundColor=getRowBackgroundColor;var getRowBorder=function getRowBorder(theme,type,colorType,isLast){if(type===_constants.REFS.TYPES.SECONDARY&&!isLast)return"1px solid ".concat(theme.tableList[colorType].rowBorderColor);return null;};exports.getRowBorder=getRowBorder;var getRowBorderRadius=function getRowBorderRadius(type,isFirst,isLast){if(type===_constants.REFS.TYPES.SECONDARY&&isFirst)return"4px 4px 0 0";if(type===_constants.REFS.TYPES.SECONDARY&&isLast)return"0 0 4px 4px";if(type===_constants.REFS.TYPES.SECONDARY)return"0";return'4px';};exports.getRowBorderRadius=getRowBorderRadius;var getCellBorder=function getCellBorder(theme,type,colorType,isLast,isWithoutBorder){if(type===_constants.REFS.TYPES.SECONDARY&&!isLast&&!isWithoutBorder)return"1px solid ".concat(theme.tableList[colorType].rowBorderColor);return null;};exports.getCellBorder=getCellBorder;var getInitSortableColumns=function getInitSortableColumns(captions){var item=captions.find(function(element){return element.sortOrder;});if(item)return _defineProperty({},item.id,item.sortOrder);return{};};exports.getInitSortableColumns=getInitSortableColumns;var getSortedData=function getSortedData(data,item,sortableColumns){if(!sortableColumns[item.id])return data;return data.map(function(element){var items=_toConsumableArray(element.items).sort(item.sort);if(sortableColumns[item.id]===_constants.REFS.SORT_ORDERS.DESC)items=items.reverse();return _objectSpread(_objectSpread({},element),{},{items:items});});};exports.getSortedData=getSortedData;var getSortableColumns=function getSortableColumns(sortableColumns,item){var columnSort;if(!sortableColumns[item.id])columnSort=_constants.REFS.SORT_ORDERS.ASC;else columnSort=sortableColumns[item.id]===_constants.REFS.SORT_ORDERS.ASC?_constants.REFS.SORT_ORDERS.DESC:null;return _defineProperty({},item.id,columnSort);};exports.getSortableColumns=getSortableColumns;var getUpdateSortItem=function getUpdateSortItem(sortableColumns,captions){var sortableColumnsItems=Object.keys(sortableColumns).filter(function(item){return sortableColumns[item];});if(sortableColumnsItems!==null&&sortableColumnsItems!==void 0&&sortableColumnsItems.length)return captions.find(function(item){return item.id===sortableColumnsItems[0];});return null;};exports.getUpdateSortItem=getUpdateSortItem;var getCanPaginateColumns=function getCanPaginateColumns(nodeWidth,captions){var result=captions.reduce(function(acc,item){acc+=item.tableViewMinWidth||0;return acc;},0);return result>nodeWidth;};exports.getCanPaginateColumns=getCanPaginateColumns;var getColumnsPaginationLimit=function getColumnsPaginationLimit(nodeWidth,captions){var withoutPagination=captions.filter(function(item){return!item.isPaginate;}).reduce(function(acc,item){acc+=item.tableViewMinWidth||0;return acc;},0);var paginateItemWidth=captions.find(function(item){return item.isPaginate;}).tableViewMinWidth;return Math.floor((nodeWidth-withoutPagination)/paginateItemWidth);};exports.getColumnsPaginationLimit=getColumnsPaginationLimit;var getColumnsPagination=function getColumnsPagination(nodeWidth,captions){if(!nodeWidth||!captions.find(function(item){return item.isPaginate;}))return null;if(getCanPaginateColumns(nodeWidth,captions)){var limit=getColumnsPaginationLimit(nodeWidth,captions);return{offset:0,limit:limit};}return null;};exports.getColumnsPagination=getColumnsPagination;var getCalcCaptions=function getCalcCaptions(captions,params){if(!params)return captions;var calcCaptions=_toConsumableArray(captions);var paginated=captions.filter(function(item){return item.isPaginate;});var paginatedIndex=captions.indexOf(paginated[0]);var paginatedItems=paginated.slice(params.offset,params.offset+params.limit);var preparedPaginatedItems=paginatedItems.map(function(item,index){if(index===0&&params.offset>0&&paginatedItems.length===1&&params.offset+params.limit<paginated.length)return _objectSpread(_objectSpread({},item),{},{canGoLeft:true,canGoRight:true});if(index===0&&params.offset>0)return _objectSpread(_objectSpread({},item),{},{canGoLeft:true});if(index===paginatedItems.length-1&&params.offset+params.limit<paginated.length)return _objectSpread(_objectSpread({},item),{},{canGoRight:true});return item;});calcCaptions.splice.apply(calcCaptions,[paginatedIndex,paginated.length].concat(_toConsumableArray(preparedPaginatedItems)));return calcCaptions;};exports.getCalcCaptions=getCalcCaptions;var getPaginateTotal=function getPaginateTotal(data){return data.reduce(function(acc,item){acc+=item.items.length;return acc;},0);};exports.getPaginateTotal=getPaginateTotal;var getInitPagination=function getInitPagination(paginateLimit,data){if(!paginateLimit)return null;return{offset:0,limit:paginateLimit,total:getPaginateTotal(data)};};exports.getInitPagination=getInitPagination;var getPaginatedTableData=function getPaginatedTableData(data,pagination){if(!pagination)return data;var offset=0;var limit=pagination.limit;return data.map(function(item){var _item$items,_item$items2;if(offset!==pagination.offset&&offset+((_item$items=item.items)===null||_item$items===void 0?void 0:_item$items.length)<pagination.offset){offset+=item.items.length;return null;}if(offset!==pagination.offset&&offset+((_item$items2=item.items)===null||_item$items2===void 0?void 0:_item$items2.length)>=pagination.offset||limit>0){var items=item.items.slice(pagination.offset-offset,pagination.offset-offset+limit);limit-=item.items.length-(pagination.offset-offset);offset=pagination.offset;if(!items.length)return null;return _objectSpread(_objectSpread({},item),{},{items:items});}return null;}).filter(function(item){return item;});};exports.getPaginatedTableData=getPaginatedTableData;