"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validFen=validFen;exports.fenToObj=fenToObj;exports.validPositionObject=validPositionObject;exports.COLUMNS=void 0;function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}var COLUMNS='abcdefgh'.split('');exports.COLUMNS=COLUMNS;function isString(s){return typeof s==='string';}function expandFenEmptySquares(fen){return fen.replace(/8/g,'11111111').replace(/7/g,'1111111').replace(/6/g,'111111').replace(/5/g,'11111').replace(/4/g,'1111').replace(/3/g,'111').replace(/2/g,'11');}function validFen(fen){if(!isString(fen))return false;fen=fen.replace(/ .+$/,'');fen=expandFenEmptySquares(fen);var chunks=fen.split('/');if(chunks.length!==8)return false;for(var i=0;i<8;i+=1){if(chunks[i].length!==8||chunks[i].search(/[^kqrnbpKQRNBP1]/)!==-1){return false;}}return true;}function fenToPieceCode(piece){if(piece.toLowerCase()===piece){return"b".concat(piece.toLowerCase());}return"w".concat(piece.toLowerCase());}function fenToObj(fen){if(!validFen(fen))return false;fen=fen.replace(/ .+$/,'');var rows=fen.split('/');var position={};var currentRow=8;for(var i=0;i<8;i+=1){var row=rows[i].split('');var colIdx=0;for(var j=0;j<row.length;j+=1){if(row[j].search(/[1-8]/)!==-1){var numEmptySquares=parseInt(row[j],10);colIdx+=numEmptySquares;}else{var square=COLUMNS[colIdx]+currentRow;position[square]=fenToPieceCode(row[j]);colIdx+=1;}}currentRow-=1;}return position;}function validSquare(square){return isString(square)&&square.search(/^[a-h][1-8]$/)!==-1;}function validPieceCode(code){return isString(code)&&code.search(/^[bw][KQRNBP]$/)!==-1;}function validPositionObject(pos){if(pos===null||_typeof(pos)!=='object')return false;for(var i in pos){if(!pos.hasOwnProperty(i))continue;// eslint-disable-line
if(!validSquare(i)||!validPieceCode(pos[i])){return false;}}return true;}