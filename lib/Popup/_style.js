"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StyledPopupBoxInner=exports.StyledPopupBox=exports.StyledPopupOpener=void 0;var _styledComponents=_interopRequireDefault(require("styled-components"));var _constants=require("../_constants");var _constants2=require("../Typography/_constants");var _utils=require("../Typography/_utils");var _constants3=require("./_constants");var _utils2=require("./_utils");var _templateObject,_templateObject2,_templateObject3;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0);}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}var popupBoxPositioningVertical=function popupBoxPositioningVertical(placement,align,params){if(params.openerNodeHeight===null||params.innerNodeHeight===null)return{top:0};var top='auto';var bottom='auto';var height='auto';var viewportHeight=document.documentElement.clientHeight||window.innerHeight;var _document$documentEle=document.documentElement,scrollHeight=_document$documentEle.scrollHeight,scrollTop=_document$documentEle.scrollTop;var spaceTop=params.openerNodeTop;var spaceBottom=viewportHeight-spaceTop-params.openerNodeHeight;var realSpaceTop=scrollTop+spaceTop;var realSpaceBottom=scrollHeight-scrollTop-viewportHeight+spaceBottom;if(placement===_constants3.BOX_REFS.PLACEMENT.BOTTOM){top=spaceTop+params.openerNodeHeight;if(params.innerNodeHeight>spaceBottom){if(params.innerNodeHeight>realSpaceBottom){height=realSpaceBottom;}if(spaceBottom<spaceTop){top='auto';height='auto';bottom=spaceBottom+params.openerNodeHeight;if(params.innerNodeHeight>realSpaceTop){height=realSpaceTop;}}}}else if(placement===_constants3.BOX_REFS.PLACEMENT.TOP){bottom=spaceBottom+params.openerNodeHeight;if(params.innerNodeHeight>spaceTop){if(params.innerNodeHeight>realSpaceTop){height=realSpaceTop;}if(spaceTop<spaceBottom){bottom='auto';height='auto';top=spaceTop+params.openerNodeHeight;if(params.innerNodeHeight>realSpaceBottom){height=realSpaceBottom;}}}}else if([_constants3.BOX_REFS.PLACEMENT.RIGHT,_constants3.BOX_REFS.PLACEMENT.LEFT].includes(placement)){if(params.innerNodeHeight>viewportHeight){top=0;bottom=0;}else if(align===_constants3.BOX_REFS.ALIGN.START){top=spaceTop;if(params.innerNodeHeight>params.openerNodeHeight+spaceBottom){top='auto';bottom=0;}}else if(align===_constants3.BOX_REFS.ALIGN.END){bottom=spaceBottom;if(params.innerNodeHeight>spaceTop+params.openerNodeHeight){top=0;bottom='auto';}}else if(align===_constants3.BOX_REFS.ALIGN.CENTER){var diffHeight=(params.innerNodeHeight-params.openerNodeHeight)/2;top=diffHeight>spaceTop?0:spaceTop-diffHeight;if(params.innerNodeHeight-diffHeight>params.openerNodeWidth+spaceBottom){top='auto';bottom=0;}}}return{top:top,bottom:bottom,height:height};};var popupBoxPositioningHorizontal=function popupBoxPositioningHorizontal(placement,align,params){if(params.openerNodeWidth===null||params.innerNodeWidth===null)return{left:0};var left='auto';var right='auto';var width='auto';var viewportWidth=document.documentElement.clientWidth||window.innerWidth;var _document$documentEle2=document.documentElement,scrollWidth=_document$documentEle2.scrollWidth,scrollLeft=_document$documentEle2.scrollLeft;var spaceLeft=params.openerNodeLeft;var spaceRight=viewportWidth-spaceLeft-params.openerNodeWidth;var realSpaceLeft=scrollLeft+spaceLeft;var realSpaceRight=scrollWidth-scrollLeft-viewportWidth+spaceRight;if(placement===_constants3.BOX_REFS.PLACEMENT.RIGHT){left=spaceLeft+params.openerNodeWidth;if(params.innerNodeWidth>spaceRight){if(params.innerNodeWidth>realSpaceRight){width=realSpaceRight;}if(spaceRight<spaceLeft){left='auto';width='auto';right=spaceRight+params.openerNodeWidth;if(params.innerNodeWidth>realSpaceLeft){width=realSpaceLeft;}}}}else if(placement===_constants3.BOX_REFS.PLACEMENT.LEFT){right=spaceRight+params.openerNodeWidth;if(params.innerNodeWidth>spaceLeft){if(params.innerNodeWidth>realSpaceLeft){width=realSpaceLeft;}if(spaceLeft<spaceRight){right='auto';width='auto';left=spaceLeft+params.openerNodeWidth;if(params.innerNodeWidth>realSpaceRight){width=realSpaceRight;}}}}else if([_constants3.BOX_REFS.PLACEMENT.TOP,_constants3.BOX_REFS.PLACEMENT.BOTTOM].includes(placement)){if(params.innerNodeWidth>viewportWidth){left=0;right=0;}else if(align===_constants3.BOX_REFS.ALIGN.START){left=spaceLeft;if(params.innerNodeWidth>params.openerNodeWidth+spaceRight){left='auto';right=0;}}else if(align===_constants3.BOX_REFS.ALIGN.END){right=spaceRight;if(params.innerNodeWidth>spaceLeft+params.openerNodeWidth){left=0;right='auto';}}else if(align===_constants3.BOX_REFS.ALIGN.CENTER){var diffWidth=(params.innerNodeWidth-params.openerNodeWidth)/2;left=diffWidth>spaceLeft?0:spaceLeft-diffWidth;if(params.innerNodeWidth-diffWidth>params.openerNodeWidth+spaceRight){left='auto';right=0;}}}return{left:left,right:right,width:width};};var StyledPopupOpener=_styledComponents["default"].span(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n  box-sizing: border-box;\n  display: ",";\n"])),function(props){return(0,_utils2.getDisplay)(props.sDisplay);});exports.StyledPopupOpener=StyledPopupOpener;var StyledPopupBox=_styledComponents["default"].div.attrs(function(_ref){var sPlacement=_ref.sPlacement,sAlign=_ref.sAlign,sPositioningParams=_ref.sPositioningParams,sZIndex=_ref.sZIndex;return{style:_objectSpread(_objectSpread(_objectSpread({},popupBoxPositioningVertical(sPlacement,sAlign,sPositioningParams)),popupBoxPositioningHorizontal(sPlacement,sAlign,sPositioningParams)),{},{zIndex:sZIndex})};})(_templateObject2||(_templateObject2=_taggedTemplateLiteral(["\n  position: fixed;\n  box-sizing: border-box;\n  opacity: ",";\n  font-size: 0;\n  overflow: ",";\n  background: ",";\n  border: ",";\n  box-shadow: ",";\n  margin: 2px 0;\n  border-radius: 6px;\n  max-height: 400px;\n"])),function(props){return props.isMounted?1:0;},function(_ref2){var sOverflow=_ref2.sOverflow;return sOverflow;},function(_ref3){var theme=_ref3.theme,sColorType=_ref3.sColorType,isTransparent=_ref3.isTransparent;return!isTransparent&&theme.popup[sColorType].backgroundColor;},function(_ref4){var theme=_ref4.theme,sColorType=_ref4.sColorType,isTransparent=_ref4.isTransparent;return!isTransparent&&"1px solid ".concat(theme.popup[sColorType].borderColor);},function(_ref5){var theme=_ref5.theme,sColorType=_ref5.sColorType,isTransparent=_ref5.isTransparent;return!isTransparent&&theme.popup[sColorType].boxShadow;});exports.StyledPopupBox=StyledPopupBox;var StyledPopupBoxInner=_styledComponents["default"].div(_templateObject3||(_templateObject3=_taggedTemplateLiteral(["\n  position: relative;\n  box-sizing: border-box;\n  display: inline-block;\n  color: ",";\n  font-size: ",";\n\n  @media (",") {\n    font-size: ",";\n  }\n\n  @media (",") {\n    font-size: ",";\n  }\n"])),function(_ref6){var theme=_ref6.theme,sColorType=_ref6.sColorType;return(0,_utils.getColor)(theme,sColorType,_constants2.REFS.COLORS.PRIMARY);},(0,_utils.getFontSize)(_constants2.REFS.SIZES.M,_constants.MEDIA_SIZES.S),_constants.MEDIA.TABLET,(0,_utils.getFontSize)(_constants2.REFS.SIZES.M,_constants.MEDIA_SIZES.M),_constants.MEDIA.DESKTOP,(0,_utils.getFontSize)(_constants2.REFS.SIZES.M,_constants.MEDIA_SIZES.L));exports.StyledPopupBoxInner=StyledPopupBoxInner;