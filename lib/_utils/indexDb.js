"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}var Store=/*#__PURE__*/function(){function Store(){var dbName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'gameWithComputer';var storeName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'game';_classCallCheck(this,Store);this.storeName=storeName;this.dbp=new Promise(function(resolve,reject){var openreq=indexedDB.open(dbName,1);/* eslint-disable-line */openreq.onerror=function(){return reject(openreq.error);};openreq.onsuccess=function(){return resolve(openreq.result);};openreq.onupgradeneeded=function(){openreq.result.createObjectStore(storeName);};});}_createClass(Store,[{key:"withIDBStore",value:function withIDBStore(type,callback){var _this=this;return this.dbp.then(function(db){return new Promise(function(resolve,reject){var transaction=db.transaction(_this.storeName,type);transaction.oncomplete=function(){return resolve();};transaction.onerror=function(){return reject(transaction.error);};callback(transaction.objectStore(_this.storeName));});});}}]);return Store;}();function getDefaultStore(dbName,storeName){var store;if(!store)store=new Store(dbName,storeName);return store;}function get(key){var store=arguments.length>1&&arguments[1]!==undefined?arguments[1]:getDefaultStore();var req;return store.withIDBStore('readonly',function(localStore){req=localStore.get(key);}).then(function(){return req.result;});}function set(key,value){var store=arguments.length>2&&arguments[2]!==undefined?arguments[2]:getDefaultStore();return store.withIDBStore('readwrite',function(localStore){localStore.put(value,key);});}function del(key){var store=arguments.length>1&&arguments[1]!==undefined?arguments[1]:getDefaultStore();return store.withIDBStore('readwrite',function(localStore){localStore["delete"](key);});}function clear(){var store=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getDefaultStore();return store.withIDBStore('readwrite',function(localStore){localStore.clear();});}var getIndexDbData=function getIndexDbData(id){return get(id);};function getAllIndexDbData(){var store=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getDefaultStore();var req;return store.withIDBStore('readonly',function(localStore){req=localStore.getAll();}).then(function(){return req.result;});}var setIndexDb=function setIndexDb(data){set(data.id,data);};var _default={getDefaultStore:getDefaultStore,get:get,set:set,del:del,clear:clear,getIndexDbData:getIndexDbData,getAllIndexDbData:getAllIndexDbData,setIndexDb:setIndexDb};exports["default"]=_default;